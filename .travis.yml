language: python

python:
  - '3.5'
  - '3.6'
  - '3.7'
  - '3.8'

env:
  - FLASK_VERSION=1.1.2
  - FLASK_VERSION=1.0.4
  - FLASK_VERSION=1.0.0

  - TWISTED_VERSION=18.4.0
  - TWISTED_VERSION=18.9.0
  - TWISTED_VERSION=19.2.1

  - DJANGO_VERSION=2.0.13
  - DJANGO_VERSION=2.1.15
  - DJANGO_VERSION=2.2.12
  - DJANGO_VERSION=3.0.5

  - PYRAMID_VERSION=1.9.2
  - PYRAMID_VERSION=1.9.4
  - PYRAMID_VERSION=1.10.4

matrix:
  exclude:
    - python: '3.5'
      env: DJANGO_VERSION=3.0.5

install:
  - pip install -U pip setuptools wheel
  - if [ -v FLASK_VERSION ]; then pip install Flask==$FLASK_VERSION; fi
  - if [ -v TWISTED_VERSION ]; then pip install Twisted==$TWISTED_VERSION treq; fi
  - if [ -v DJANGO_VERSION ]; then pip install Django==$DJANGO_VERSION; fi
  - if [ -v PYRAMID_VERSION ]; then pip install pyramid==$PYRAMID_VERSION; fi

script:
  - python setup.py test
